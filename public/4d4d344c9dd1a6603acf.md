---
title: Melos ã‚’åˆ©ç”¨ã—ãŸãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ æ§‹ç¯‰ã®ã“ã¨ã¯ã˜ã‚
tags:
  - Flutter
private: false
updated_at: '2023-12-17T17:10:42+09:00'
id: 4d4d344c9dd1a6603acf
organization_url_name: yumemi
slide: false
ignorePublish: false
---
ã“ã®è¨˜äº‹ã¯ YUMEMI Flutter Advent Calendar 2023 ã® 17 æ—¥ç›®ã®è¨˜äº‹ã§ã™ã€‚

https://qiita.com/advent-calendar/2023/yumemi-flutter

# ã¯ã˜ã‚ã«

ã“ã‚“ã«ã¡ã¯ã€ãŸã£ã¤ãƒ¼ ( [@tatsutakein][Twitter] ) ã§ã™ã€‚

ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚¢ãƒ—ãƒªé–‹ç™ºã§ã¯ã‚ˆãæ¡ç”¨ã•ã‚Œã‚‹ãƒãƒ«ãƒãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ã™ãŒã€ Flutter é–‹ç™ºã§ã¯æ„å¤–ã¨ãƒãƒ«ãƒãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®æ¡ç”¨äº‹ä¾‹ã‚’èã‹ãªã„æ°—ãŒã™ã‚‹ã®ã§ã€ç§ã®äº‹ä¾‹ã‚’ç´¹ä»‹ã§ãã‚Œã°ã¨æ€ã„ã¾ã™ã€‚

â€» ã‚ãã¾ã§ã‚‚å€‹äººã®æ„è¦‹ã§ã™ã€‚ Android ã‚¢ãƒ—ãƒªé–‹ç™ºã§ã®ãƒãƒ«ãƒãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¨ç•°ãªã‚Šã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹é¢ã§ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã«ã¯ãªã‚Šå¾—ãªã„ç‚¹ã«ã¯ã”æ³¨æ„ãã ã•ã„ã€‚

# Melos

ãƒãƒ«ãƒãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ Dart ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨ã—ã¦æ¨™æº–ã§åˆ©ç”¨ã§ãã¾ã™ãŒã€ Melos ã‚’åˆ©ç”¨ã™ã‚‹ã¨ä¾¿åˆ©ãªæ©Ÿèƒ½ãŒã‚ã‚‹ã®ã§ç§ã¯åŸºæœ¬çš„ã« Melos ã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ã€‚
ã‚‚ã—ã‚ˆã‘ã‚Œã°ä»¥å‰ LT ã§ç™ºè¡¨ã—ãŸéš›ã®è³‡æ–™ã‚‚ã”ç¢ºèªã„ãŸã ã‘ã‚‹ã¨å¹¸ã„ã§ã™ã€‚

https://speakerdeck.com/tatsutakein/melos-deshi-merumarutipatukezigou-cheng-nakai-fa

[3.2.0][melos#320] ã§ã¯ FEAT: support syncing common dependency versions ãŒè¿½åŠ ã•ã‚Œã€å¤–éƒ¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ãŒæ¥½ã«ãªã‚Šã¾ã—ãŸ ğŸ‰

## ãƒãƒ«ãƒãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®æ§‹æˆ

ä»Šå›ã¯ä»¥ä¸‹ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ§‹æˆã‚’æƒ³å®šã—ã¦ã„ã¾ã™ã€‚

```text
.
â”œâ”€â”€ apps
â”‚Â Â  â”œâ”€â”€ catalog
â”‚Â Â  â””â”€â”€ frontend
â””â”€â”€ packages
 Â Â  â”œâ”€â”€ core
 Â Â  â”‚Â Â  â”œâ”€â”€ ...
 Â Â  â”‚Â Â  â”œâ”€â”€ designsystem # ä»Šå›ã¯ã“ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒå¯¾è±¡
 Â Â  â”‚Â Â  â””â”€â”€ ...
 Â Â  â””â”€â”€ feature
 Â Â      â”œâ”€â”€ ...
 Â Â      â””â”€â”€ top
```

`packages/core/designsystem` ã® `icons` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆã¯ä»¥ä¸‹ã®æ„Ÿã˜ã§ã™ã€‚

```text
.
â”œâ”€â”€ ...
â””â”€â”€ designsystem
 Â Â  â”œâ”€â”€ assets
 Â Â  â””â”€â”€ lib
 Â Â   Â Â  â”œâ”€â”€ gen
 Â Â   Â Â  â”œâ”€â”€ l10n
 Â Â   Â Â  â”œâ”€â”€ src
 Â Â   Â Â  â”‚   â”œâ”€â”€ components
 Â Â   Â Â  â”‚   â”œâ”€â”€ ...
 Â Â   Â Â  â”‚   â”œâ”€â”€ icons
 Â Â   Â Â  â”‚   â”‚Â Â  â”œâ”€â”€ hoge_icons.dart # ä»Šå›ã¯ã“ã“ã‚’å¯¾è±¡ã¨ã—ã¦ã„ã¾ã™
 Â Â   Â Â  â”‚   â”‚Â Â  â””â”€â”€ index.dart
 Â Â   Â Â  â”‚   â””â”€â”€ themes
 Â Â   Â Â  â””â”€â”€ core_designsystem.dart
```

## designsystem ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®å®šç¾©

`packages/core/designsystem` å´ã§ã®æ‰‹é †ã‚’è¨˜è¼‰ã—ã¾ã™ã€‚

### ã‚¢ã‚¤ã‚³ãƒ³ã‚¯ãƒ©ã‚¹ã®å®šç¾©

å„ feature ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§åˆ©ç”¨ã™ã‚‹ã‚¢ã‚¤ã‚³ãƒ³ã‚’å…±é€šã§å®šç¾©ã—ã¾ã™ã€‚

```dart:packages/core/designsystem/lib/src/icons/hoge_icons.dart
import 'package:flutter/material.dart';

final class HogeIcons {
  const HogeIcons._();

  ...

  static const IconData favorite = Icons.favorite;

  ...
}

```

ä½™è«‡ã§ã™ãŒ, IntelliJ ç³»ã® IDE ã‚’åˆ©ç”¨ã—ã¦ã„ã‚‹ã¨ä½¿ç”¨ã™ã‚‹ã‚¢ã‚¤ã‚³ãƒ³ãŒãƒ‘ãƒƒã¨ç¢ºèªã§ãã¦ã„ã„ã§ã™ã­ã€‚
VSCode ã«ã‚‚åŒæ§˜ã®æ‹¡å¼µæ©Ÿèƒ½ã¯ã‚ã‚‹ã®ã§ã—ã‚‡ã†ã‹ï¼Ÿ ğŸ‘€

![IntelliJ](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/184644/9d9db162-ccd5-f19e-1c34-b3db099c94bb.png)

### ãƒãƒ¬ãƒ«ã®å®šç¾©

ãƒãƒ¬ãƒ«ã‚’è¨˜è¼‰ã—ã¾ã™ã€‚

```dart:packages/core/designsystem/lib/src/icons/index.dart
export 'hoge_icons.dart';
```

### ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨ã—ã¦ã®ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ

ã“ã¡ã‚‰ã‚‚å¿˜ã‚Œãšã«è¨˜è¼‰ã—ã¾ã™ã€‚

```dart:packages/core/designsystem/lib/core_designsystem.dart
library core_designsystem;

...
export 'src/icons/index.dart';
...
```

## ä½¿ç”¨ä¾‹

`packages/feature/top` ã‚’ä¾‹ã«è¨˜è¼‰ã—ã¾ã™ã€‚

### pubspec.yaml ã®è¨˜è¼‰

ä¾å­˜ã« `core_designsystem` ã‚’è¿½åŠ ã—ã¾ã™ã€‚

```diff_yaml:packages/feature/top/pubspec.yaml
name: feature_top

...

dependencies:
  flutter:
    sdk: flutter
  flutter_localizations:
    sdk: flutter

  ...

+ core_designsystem:
+   path: ../../core/designsystem
...
```

### `core_designsystem` ã§å®šç¾©ã—ãŸã‚¢ã‚¤ã‚³ãƒ³ã‚’åˆ©ç”¨ã™ã‚‹

æ™®æ®µã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚ˆã†ã«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ import ã—ã€å®šç¾©ã—ãŸã‚¢ã‚¤ã‚³ãƒ³ã‚’åˆ©ç”¨ã§ãã¾ã™ ğŸ™Œ

```dart
import 'package:core_designsystem/core_designsystem.dart';
import 'package:flutter/material.dart';

final class FavoriteIconButton extends StatelessWidget {
  const FavoriteIconButton({super.key});

  @override
  Widget build(BuildContext context) {
    return IconButton(
      onPressed: () { /** do nothing. */ },
      icon: Icon(HogeIcons.favorite),
    );
  }
}
```

# ãŠã‚ã‚Šã«

ã„ã‹ãŒã§ã—ãŸã§ã—ã‚‡ã†ã‹ã€‚ãƒãƒ«ãƒãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã†ã¾ãæ´»ç”¨ã—ã¦ã€è¦‹é€šã—ã®è‰¯ã„ã‚³ãƒ¼ãƒ‰ã§é–‹ç™ºãŒé€²ã‚ã‚‰ã‚Œã‚‹ã¨è‰¯ã„ã§ã™ã­ ğŸ™Œ

æ¬¡ã¯ @takashimelon ã•ã‚“ã§ã™ã€‚


[Twitter]: https://twitter.com/tatsutakein
[melos#320]: https://pub.dev/packages/melos/changelog#320
